commit eb99407efb9f
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Sep 30 16:12:37 2025 +0200

    Fix typo

commit 8fffe6418f90
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sun Sep 28 13:50:53 2025 +0200

    Align with kernel patch

commit 8ae3746eb597
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 27 19:40:46 2025 +0200

    Fix failure to send EOI on 1 and 2 byte writes
    
       The first byte in a write is always sent by writing to the
       tms9914 chip directly to setup for the subsequent fifo transfer.
       We were not checking for a 1 byte message with eoi resulting in
       EOI not being set.
    
       For a 2 byte message the first byte was sent directly and the
       second byte also since the retval after the fifo transfer was
       non-zero causing a return before the final EOI write. The second
       byte was then sent as a separate 1 byte write.
    
       Only send the first byte directly if more than 1 byte is to be
       transferred with send_eoi true.
    
       Set retval to zero before the fifo transfer code to avoid premature
       return in case the fifo code is not used (1 or 2 byte message with
       send_eoi true).

commit c1606427bbdb
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 27 19:37:56 2025 +0200

    Fixes for handling device clear
    
      Pushing events on DCAS and DTAS sets the DCAS/DTAS bits in status
    
      Return -EINTR when read is interrupted by a device clear.

commit b60ed39942f4
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 27 19:00:03 2025 +0200

    Re-apply compat changes after kernel patches

commit df58fc616281
Author: Luke Yang <lukeyang.dev@gmail.com>
Date:   Thu Aug 14 15:01:36 2025 -0400

    staging: gpib: tidy-up comments
    
    Improve comment readability:
    
    - "//comment" -> "// comment"
    - Align comments vertically in columns
    - Enforce consistency between "// comments" and "/* comments */"
    
    Signed-off-by: Luke Yang <lukeyang.dev@gmail.com>
    Link: https://lore.kernel.org/r/aJ4ykOs_MmjnQdPa@luyang-thinkpadp1gen7.toromso.csb
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit dd54aea34228
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 27 18:51:51 2025 +0200

    Revert compat to apply kernel patch

commit 94b814abb7e9
Author: Qianfeng Rong <rongqianfeng@vivo.com>
Date:   Tue Aug 26 20:32:01 2025 +0800

    staging: gpib: use int type to store negative error codes
    
    The "ret" variable is used to store the return from bb_write() returns
    either zero on success or negative error codes on failure.  Storing the
    error codes in size_t which is an unsigned long, doesn't cause an issue
    at runtime but it's ugly as pants.  Change "ret" from size_t to int
    type.  No effect on runtime.
    
    Signed-off-by: Qianfeng Rong <rongqianfeng@vivo.com>
    Reviewed-by: Dan Carpenter <dan.carpenter@linaro.org>
    Link: https://lore.kernel.org/r/20250826123208.300145-1-rongqianfeng@vivo.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 158ed7bae1ea
Author: Liao Yuanhong <liaoyuanhong@vivo.com>
Date:   Tue Aug 19 21:11:54 2025 +0800

    staging: gpib: tnt4882: Remove redundant header files
    
    The header file <linux/ioport.h> is already included on line 12, outside of
    the #ifdef CONFIG_GPIB_PCMCIA block. It does not need to be included again
    inside the #ifdef CONFIG_GPIB_PCMCIA block.
    
    Signed-off-by: Liao Yuanhong <liaoyuanhong@vivo.com>
    Link: https://lore.kernel.org/r/20250819131203.152724-1-liaoyuanhong@vivo.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit ca6e8f2fa537
Author: Gaston Gonzalez <gascoar@gmail.com>
Date:   Fri Jul 18 16:40:30 2025 -0300

    staging: gpib: fix typo
    
    Fix typo in comment: dapter/adapter.
    
    Signed-off-by: Gaston Gonzalez <gascoar@gmail.com>
    Link: https://lore.kernel.org/r/20250718194029.35652-2-gascoar@gmail.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 6f8c64000cdd
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Sep 15 18:24:57 2025 +0200

    Fix xugc_read timeout handling

commit c99237b82aea
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Sep 15 17:44:12 2025 +0200

    Make xugc_read interruptible and cleanup naming
    
    Reads used usb_buk_msg which is not interruptible. With long timeouts
    the only way to prematurely abort the programme reading from a device
    was to unplug the adapter.
    
    Now using fill/submit urb and wait_for_completion_interruptible so
    sending and interrupt to the programme doing the read will succeed.
    
    Remove _ioctl_ in names as it was not relevant here.

commit 2fe121cb7909
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sun Sep 14 08:46:31 2025 +0200

    Add support for read holdoff
    
    When some devices have data to send they start the write immediately
    after ATN goes false after being addressed as a talker. This caused
    the device to detect that the adapter had not asserted NDAC or NRFD
    yet causing the write to fail with a NO-LISTENERS error.
    
    A new version of the firmware allows setting the primary GPIB address
    of the adapter. By checking for its listen address in a command
    (i.e. when ATN is true) the adapter firmware knows when it is in
    listener addressed state and so can keep the NRFD/NDAC lines asserted
    when ATN is set false, effectivley holding off the writer until the
    adapter starts its read.
    
    This patch uses the new control to set the controller primary address.

commit 80b48522b366
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 13 13:33:24 2025 +0200

    Add new devid and checks for ENODEV, coding style cleanup
    
    Add device id for the new USB/Ethernet-GPIB adapter
    
    Protect driver entry points against ENODEV
    
    Address kernel coding style issues

commit 4caa619e86ae
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Sep 12 13:10:45 2025 +0200

    Fix and cleanup xugc_write
    
    Rename variables to be more intuitive and consistent with xugc_read
    Fix length confusion.

commit 06589db790ae
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Sep 12 10:40:56 2025 +0200

    Bug fixes, cleanup and additional comments
    
    Fix endpoint assignment - they need to include the DIRECTION bit.
    This fixes the timeout problem since the firmare did not execute
    the bulk-in abort due to missing DIRECTION bit.
    
    In xugc_read the firmare does not send the full requested data but
    chops it up into 1012 bytes size chunks, we now loop until we get it
    all. The read is termniated either when all requested bytes were read
    or if we get and EOM or termchar notification.
    
    Add comments to some of the variables used.
    The code was also been cleaned up.
    Removed some unused fields in the private data structure.
    
    The interface class id for the usb_device_id has been changed back
    to 255 so it no longer conflicts with the usbtmc driver.

commit 26fc9cc18971
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed Sep 10 17:53:34 2025 +0200

    Fix update_status bug, add LXXS, TXXS and REM states, change devid
    
    Fix bug in xugc_update_status by using xugc_line_status instead of
    line state control reqest.
    
    Add Talker/Listener state update to xugc_command
    Set REM with xugc_remote_enable
    
    Change devid to match usbtmc device (must blacklist usbtmc) for easy
    switching between xyphro_ugc and usbtmc driver for testing purposes.
    Will go back to bInterfaceClass = 255 when things are stable.

commit 70f645929fe1
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Sep 9 18:21:30 2025 +0200

    Fix indentation and device recognition
    
    Indentation as per kernel coding rules.
    
    Device recognition so that it does not pre-empt the usbtmc
    driver.
    
    This is done by explicitly testing for:
    idVendor           = 0x03eb
    idProduct          = 0x2065
    bIinterfaceClass   = 255
    bInterfaceSubClass = 3
    bInterfaceProtocol = 1

commit fa2d65ea11b4
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Sep 9 01:09:34 2025 +0200

    Bug fixes
    
    Change sense on IFC and ATN but not on REN
    Fix timeouts in read
    Fix release of int in disconnect
    Use board as interrupt context instead of priv
    Complement line status

commit a9231f74df7e
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Sep 8 20:30:16 2025 +0200

    Initial commit for experimental xyphro usbtmc to GPIB controller

commit 0fc6e300481c
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Jul 26 12:22:54 2025 +0200

    Use file_inode()
    
    Patch from Al Viro

commit bdc96bb7eeba
Author: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Date:   Sat Jul 5 11:52:33 2025 +0200

    staging: gpib: Fix error handling paths in cb_gpib_probe()
    
    If cb_gpib_config() fails, 'info' needs to be freed, as already done in the
    remove function.
    
    While at it, remove a pointless comment related to gpib_attach().
    
    Fixes: e9dc69956d4d ("staging: gpib: Add Computer Boards GPIB driver")
    Signed-off-by: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
    Link: https://lore.kernel.org/r/bf89d6f2f8b8c680720d02061fc4ebdd805deca8.1751709098.git.christophe.jaillet@wanadoo.fr
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 879d766831cc
Author: Harshit Mogalapalli <harshit.m.mogalapalli@oracle.com>
Date:   Thu Jul 3 00:05:30 2025 -0700

    staging: gpib: lpvo_usb_gpib: Remove unreachable return statement
    
    usb_gpib_read() has a return statement after if else which is
    unreachable, clean this up.
    
    Signed-off-by: Harshit Mogalapalli <harshit.m.mogalapalli@oracle.com>
    Link: https://lore.kernel.org/r/20250703070542.1957371-1-harshit.m.mogalapalli@oracle.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit e715360fc71b
Author: Harshit Mogalapalli <harshit.m.mogalapalli@oracle.com>
Date:   Wed Jul 2 23:52:14 2025 -0700

    staging: gpib: cec: Fix inconsistent indentation in cec_pci_attach()
    
    This is a cleanup which fixes inconsistent indentation. This is found
    with smatch.
    
            drivers/staging/gpib/cec/cec_gpib.c:305
            cec_pci_attach() warn: inconsistent indenting
    
    Signed-off-by: Harshit Mogalapalli <harshit.m.mogalapalli@oracle.com>
    Link: https://lore.kernel.org/r/20250703065224.1956688-1-harshit.m.mogalapalli@oracle.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 0aae4b0f985e
Author: Harshit Mogalapalli <harshit.m.mogalapalli@oracle.com>
Date:   Wed Jul 2 23:46:20 2025 -0700

    staging: gpib: Fix error code in board_type_ioctl()
    
    When copy_from_user() fails it return number of bytes it wasn't able to
    copy. So the correct return value when copy_from_user() fails is
    -EFAULT.
    
    Fixes: 9dde4559e939 ("staging: gpib: Add GPIB common core driver")
    Signed-off-by: Harshit Mogalapalli <harshit.m.mogalapalli@oracle.com>
    Link: https://lore.kernel.org/r/20250703064633.1955893-1-harshit.m.mogalapalli@oracle.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit f39251036813
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed Jul 23 17:50:02 2025 +0200

    Clean comnpat and Add compat changes for 6.16
    
    Add COMPAT_DESTROY_TIMER_ON_STACK for 6.16
    
    Change DEL_TIMER_SYNC to COMPAT_DEL_TIMER_SYNC

commit c4cb0e4896e9
Author: Colin Ian King <colin.i.king@gmail.com>
Date:   Mon Jun 23 23:09:58 2025 +0100

    staging: gpib: fix unset padding field copy back to userspace
    
    The introduction of a padding field in the gpib_board_info_ioctl is
    showing up as initialized data on the stack frame being copyied back
    to userspace in function board_info_ioctl. The simplest fix is to
    initialize the entire struct to zero to ensure all unassigned padding
    fields are zero'd before being copied back to userspace.
    
    Signed-off-by: Colin Ian King <colin.i.king@gmail.com>
    Fixes: 9dde4559e939 ("staging: gpib: Add GPIB common core driver")
    Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
    Link: https://lore.kernel.org/r/20250623220958.280424-1-colin.i.king@gmail.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit fa6f72a7ee99
Author: Yuesong Li <liyuesong@vivo.com>
Date:   Thu Jun 19 16:07:51 2025 +0800

    staging: gpib: hp_82341: Replace manual comparison with min/max macro
    
    This improves code readability by using the standard kernel macro
    for min/max value selection while maintaining identical functionality.
    
    Signed-off-by: Yuesong Li <liyuesong@vivo.com>
    Link: https://lore.kernel.org/r/20250619080822.677662-1-liyuesong@vivo.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 6a400b39a253
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Jun 3 20:43:20 2025 +0200

    staging: gpib: Add bit and byte padding to ioctl structs
    
    Ensure that all structs have a size that is an integral mutliple
    of 32 bits.
    
    Change trailing single bit field to __u32 in gpib_open_dev_ioctl
    Add byte padding to  gpib_serial_poll_ioctl and gpib_request_service2
    Add bit padding to gpib_board_info_ioctl and gpib_ppoll_config_ioctl
    
    Signed-off-by: Dave Penkler <dpenkler@gmail.com>
    Link: https://lore.kernel.org/r/20250603184320.30594-5-dpenkler@gmail.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 277b0930f2ed
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Jun 3 20:43:19 2025 +0200

    staging: gpib: Use standard size basic uapi types
    
    Change unsigned int to __u32,
           int          to __s32
      and  short        to __s16
    
    Signed-off-by: Dave Penkler <dpenkler@gmail.com>
    Link: https://lore.kernel.org/r/20250603184320.30594-4-dpenkler@gmail.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 51571909eff7
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Jun 3 20:43:18 2025 +0200

    staging: gpib: Add local include file for commands
    
    Add the functions and enums needed only by the kernel drivers
    that were removed from the uapi/gpib.h include file to a separate
    local include file.
    
    Include this new file in the gpibP.h local include file.
    
    Signed-off-by: Dave Penkler <dpenkler@gmail.com>
    Link: https://lore.kernel.org/r/20250603184320.30594-3-dpenkler@gmail.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 0d2f5a63f37d
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Jun 3 20:43:17 2025 +0200

    staging: gpib: Remove unneeded enums and functions
    
    Remove enums and functions that do not need to be shared
    with user space.
    
    Remove enums and functions that are not needed in the kernel drivers.
    
    Signed-off-by: Dave Penkler <dpenkler@gmail.com>
    Link: https://lore.kernel.org/r/20250603184320.30594-2-dpenkler@gmail.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 77717aaea12d
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Jul 12 13:53:26 2025 +0200

    Bring files in line with kernel commit  b940fd6ce31e
    
    To apply latest kernel patches

commit d7cd219d2de8
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Jul 8 16:49:30 2025 +0200

    Add initialisation repsonse codes for newer ni-usb-hs+

commit 44e3d07dfc68
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed May 21 18:36:21 2025 +0200

    Put parentheses around arithmetic in MSA

commit 748058bc2795
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue May 20 15:06:49 2025 +0200

    Fix sad bugs
    
      The MSA macro was using gpib_address_restrict which did
      not allow a secondary address of 31. Don't use the macro
      and just trim the address to 5 bits. Fix in kernel and
      user part copies of the gpib.h include file.
    
      In reinit_descriptor the secondary address sent to internal_ibsad
      was not adjusted to the 96-127 range causing secondary addressing
      to be disabled after the reinitialisation of the descriptor.

commit b0997a153593
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu May 8 17:58:31 2025 +0200

    Remove HAS_IOPORT guard and add ARCH_BCM2835 for gpio bitbang

commit 1bb649202f69
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu May 8 17:56:55 2025 +0200

    Use compat 3 arg type for driver_find_device

commit b1f27b6b24c5
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu May 8 17:53:44 2025 +0200

    Add compat pre 4.13.0 kernel wait_queue_entry_t

commit c5cf53cbc3a3
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu May 8 17:50:53 2025 +0200

    Comment IOPORT ifdef for early kernels

commit e824a8ad624b
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu May 8 11:13:49 2025 +0200

    Capitalize del_timer_sync for compat macro
    
    To make it clear that this is a comapt macro

commit adb6048f2750
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed May 7 17:52:48 2025 +0200

    Move struct for agilent driver too.

commit 68b41cb8caa2
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed May 7 17:41:14 2025 +0200

    Move struct declaration out of code for old gcc

commit 92d45f849fad
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed May 7 17:36:06 2025 +0200

    Add dependencies on CONFIG_HAS_IOPORT to IOPORT drivers

commit 5cb87439e425
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed May 7 13:47:35 2025 +0200

    Add Makefile for common core module
    
    This was suppressed during the bakcport by .gitignore

commit c23dc2c5e6ab
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed May 7 13:41:24 2025 +0200

    Split gitignore for user and kernel parts
    
    Remove Makefile

commit a76513ba8c4d
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue May 6 16:03:02 2025 +0200

    Add new files - consolidation of smaller files
    
    This was to reduce the number of source files.

commit b45946a5b810
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue May 6 16:01:05 2025 +0200

    Bump driver version to 4.3.7

commit 9f0e2bc9b583
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue May 6 15:18:32 2025 +0200

    Backport in-tree kernel drivers to the linux-gpib git repo
    
    There are virtually no functional changes since the last
    commit. These changes are the result of over 300 commits
    in the staging-testing branch of the staging tree
    https://git.kernel.org/pub/scm/linux/kernel/git/gregkh/staging.git/
    
    The backport primarily involved adding back the compat functions
    that were removed in the in-tree code. The compat functions
    enable support for the drivers to be built on different linux kernel
    versions.

commit d2584d84f091
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu Apr 10 10:52:52 2025 +0200

    Add del_timer_sync definition for 6.15 and later kernels
    
    This entry point was removed in 6.15

commit a35f8c5ec558
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu Apr 10 10:51:31 2025 +0200

    Remove uneeded compat include file for it tree drivers

commit fdd056dec934
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Nov 15 06:42:16 2024 +0100

    Allow secondary address of 31

commit 16191ad6866a
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Sep 23 11:38:36 2024 +0200

    Fix table definition

commit 95d1517ba224
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Sep 23 11:08:38 2024 +0200

    Calculate gpio_offset in attach. Use GPIOF_IN instead of GPIOF_DIR_IN

commit eb8f63c3acfb
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Sep 23 10:33:29 2024 +0200

    Add calculation of gpio_offset if offset is zero.

commit 3d004f559c1c
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sun Sep 22 21:48:38 2024 +0200

    Add printout for gpib_offset and for retval of failed GPIB get.

commit f5661b61e1c8
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sun Sep 22 20:15:27 2024 +0200

    Deal some more with Raspbian headers nonsense

commit 18eaa7cdb2ee
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sun Sep 22 19:10:59 2024 +0200

    Deal with Raspian kernel header configuration`

commit 3ff1162dd93f
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 21 12:11:04 2024 +0200

    Remove experimental stuff and go back to offset module param

commit ed5ea6a66a74
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 21 12:05:19 2024 +0200

    Remove UGLY variant and get offset from gpio device

commit b2e5060fb892
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 21 11:47:28 2024 +0200

    EXPERIMENTAL Remove lookup tables and use gpio_device instead

commit 931aa5776059
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 21 10:00:49 2024 +0200

    Remove dependency on led API

commit 778a98df97a2
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed Sep 18 17:18:47 2024 +0200

    Apply patch from Chuck Lane for compat class_create build issue
    
      Some linux distros backported the create_class definition
      from the linux 6* kernel to 5.14 causing the build to fail.
      This patch checks the actual class_create definition being
      used instead of relying on the kernel version as was previously
      the case.

commit 97440c68b45a
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu Sep 5 13:46:20 2024 +0200

    Add led patch from Michael Schwingen for yoga board and rename lookup tables

commit c2c696d3cb6a
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Aug 19 19:19:57 2024 +0200

    Add rpi3 lookup table and generalise switching between tables

commit 2ab64102a655
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sun Aug 18 10:02:26 2024 +0200

    Use platform data to allocate gpios - separate tables for rpi234 and rpi5
      Remove diagnostic hack
      Add board->gpio_dev to board structure

commit f343c4412e1e
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed Aug 14 19:02:11 2024 +0200

    Use ACT led to show read/write activity with pinmaps 0 and 1

commit 78ce6925e2d0
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed Aug 14 18:19:33 2024 +0200

    Clean up of debug print from Marcello + diagnostic hack

commit fcf6efbd74e2
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Aug 5 18:51:05 2024 +0200

    Fix compiler warning

commit 8f9262660000
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Aug 5 17:22:55 2024 +0200

    Revert to printing unexpected irq messages to debug level 0

commit 4adde8a341c2
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Aug 2 11:09:53 2024 +0200

    Apply irq robustness patch from Marcello Carla' and
           Extend bb_write listener test to check for NRFD or NDAC
           Use ENODEV errno for no listener
           Add UNT and UNL to buffer_print decode

commit 3ca3867ce768
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Jul 29 16:06:21 2024 +0200

    Avoid hang on no device and raise debug level of some messages

commit 76c3dc5d1fcb
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu Jul 18 16:16:24 2024 +0200

    Add yoga pinmap and cherrypick from yoga driver

commit 8d82c2a68d77
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Jul 16 18:37:20 2024 +0200

    Apply patch from Michael Schwingen to remove gpiod_put

commit 9813ff8f6cad
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sun Jun 9 16:03:13 2024 +0200

    Add ready responses for bona fide genuine board

commit 4c5ef2e699c9
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Jun 8 15:18:42 2024 +0200

    Remove commented debug statements

commit 577255759b29
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Jun 8 15:05:32 2024 +0200

    Remove attach message and add attached message at the end

commit 8907e40b7f64
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Jun 8 14:26:23 2024 +0200

    Reduce console spam - remove timeout messages

commit 085e8eb04c7f
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Jun 8 13:55:17 2024 +0200

    Comment out second line of timeout message print

commit 060878f4c0eb
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Jun 8 13:52:44 2024 +0200

    Reduce console spam - remove timeout message

commit b4cbd1387e7e
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon May 6 14:10:58 2024 +0000

    Add gpio pin offset parameter for RPi5 (Marcello Carla')

commit 598d6a6f9e39
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu May 2 16:13:54 2024 +0000

    Editorial changes for agilen_82350b

commit 17e8fee086b3
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu May 2 16:11:46 2024 +0000

    Interrupt read on address state change

commit e715d3993bc1
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Apr 27 07:58:43 2024 +0000

    Remove aborts on resume

commit 501b54262546
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Apr 19 12:30:18 2024 +0000

    Fix uninitialised usb_dev

commit 450a207f79da
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu Apr 18 17:11:56 2024 +0000

    Do go_idle and full init w. IFC & REN on sleep/wake

commit 3e9a3379b128
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu Apr 18 11:11:04 2024 +0000

    Assert IFC if master on resume

commit 54d1ed1a1ee1
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed Apr 17 10:01:29 2024 +0000

    Set REN in resume if needed

commit 4deba73cd490
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed Apr 17 09:10:19 2024 +0000

    Do complete initialisation on resume

commit 55ab63552735
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Apr 12 18:33:59 2024 +0000

    fix ni usb suspend resume monitor bits

commit fa70781b5f3b
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Apr 12 16:06:08 2024 +0000

    ni_usb suspend-resume sequence from W11 trace with refactor

commit 3dd2849967e2
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Thu Apr 11 08:41:36 2024 +0000

    Implement suspend-resume sequence from W11 trace

commit f67135d9cb06
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Apr 8 07:55:43 2024 +0000

    Remove erroneous free_private.

commit 9f871dfc31b3
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sun Apr 7 08:16:26 2024 +0000

    Add interrupt monitor handling. Fix formatting

commit 41798324682b
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Apr 5 21:02:47 2024 +0000

    Add suspend/resume functions and change to preferred coding style

commit 32ea5d95eb4a
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Apr 5 14:08:00 2024 +0000

    Add suspend and resume functions to agilent_82357a driver

commit 9337dddb4c80
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Feb 17 11:52:29 2024 +0000

    Revert r2082 no need for wake_up

commit 2f0c3a688a94
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Feb 16 17:24:19 2024 +0000

    Add NIUSB_ATN_STATE_ERROR code for read when ATN set

commit dd1765532351
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Feb 16 16:57:03 2024 +0000

    Wakeup potential sleeping process if SRQ line is asserted

commit ca0dbebf89fe
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Jan 16 15:19:04 2024 +0000

    Fix missing protoype warnings etc from 6.7 Makefile

commit 020d6f9da660
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Jan 16 12:40:25 2024 +0000

    Preliminary fix for CMPL being set incorrectly bug #87
       CMPL is being set after the address setup of an
       async read or write. This causes an ibwait waiting on
       the completion of the read or write to resynchronise
       (join) with the async thread immediately after the address
       setup, making it hang until the async read or write
       operation complete,  even if a timeout  has been set.
       As this can take quite some time it effectively
       nullifies the advantage of using async io.
    
       Patch  to suppress the setting of CMPL after the
       completion of the address setup operation of an
       ibrda or ibwrta request:
       - Introduce a field in async_operation to distinguish
         the type of aio in progress in my_ibcmd.
       - In my_ibcmd, if an async io is in progress and it is
         either a read or write then the end field is set in
         the IBCMD ioctl request.
       The end field is only used in ibrd as a return.
       It is reused in cmd to avoid adding a field to the
       read_write_ioctl_t structure.
       - This field is tested in the kernel space IBCMD ioctl
         handler to prevent the clearing of io_in_progress
         which suppresses the setting of CMPL in the status
         update.

commit 88179b0f7628
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Jan 13 10:16:18 2024 +0000

    Fix error return for timeout in ni_usb_command_chunck

commit bf075a8e0eaf
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Dec 12 11:12:15 2023 +0000

    Update board->state SRQ in tnt4822_update_status

commit 3b7ead580fce
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Dec 12 09:29:46 2023 +0000

    Use line state to reset SRQ, fix spelling

commit 9880d8a26ff1
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Dec 11 11:30:17 2023 +0000

    Add status debug print at ioctl done

commit a5555d361740
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Dec 11 11:23:27 2023 +0000

    Update SRQI

commit 1683a00c978c
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Dec 11 11:21:18 2023 +0000

    Update SRQI

commit b8c93c8fee3b
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Tue Oct 3 14:51:07 2023 +0000

    Refactor take_control ATN workaround for flakey ADSR

commit ce61f626ba84
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Sat Sep 30 08:19:45 2023 +0000

    Fix for 9914 bug not returning the ADSR when the board
        is in listener active state and ATN is not asserted.
        Thanks to Jim Houston and the other folks who contributed.

commit 100ed45a1feb
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Fri Sep 29 09:15:33 2023 +0000

    Bring userland ibcac behaviour into line with doc

commit c0fe8c170a39
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Mon Sep 25 16:33:05 2023 +0000

    Avoid sending useless TCS

commit 5ba99dbc20af
Author: Dave Penkler <dpenkler@gmail.com>
Date:   Wed Aug 30 08:46:17 2023 +0000

    Fix pc2 compile issue when ISA is enabled
